---
import Layout from "../components/Layout.astro";
import BlogList from "../components/BlogList";

const siteMetadata = {
  title: `kahvi's blog`,
  author: `Kahvi Patel`,
  description: `I create here sometimes. And rarely capitalize.`,
  siteUrl: `https://kahvipatel.com/`,
  social: {
    twitter: `iamkahvi`,
    instagram: `iamkahvi`,
  },
};

const { title, description } = siteMetadata;

const allPosts = await Astro.glob("../content/posts/*.md");
const sortedPosts = allPosts
  .sort(
    (a, b) =>
      new Date(b.frontmatter.date).valueOf() -
      new Date(a.frontmatter.date).valueOf(),
  )
  .filter((p) => p.frontmatter.hidden !== true);

console.log(sortedPosts.map((p) => p.frontmatter.title));
---

<Layout title={title} description={description}>
  <body>
    <BlogList posts={sortedPosts} client:load />
  </body>
</Layout>
